$(function() {
    $(document).on('click', '.js-popup-forgot .js-form-forgot [type="submit"]', function(ev) {
        ev.preventDefault();

        const $btn = $(this);
        const $form = $btn.closest('form');

        let fmData = new FormData($form[0]);

        $.ajax({
            url: '/local/ajax/forgot.php',
            type: "POST",
            data: fmData,
            processData: false,
            contentType: false
        }).done(function(response) {
            $('.js-popup-forgot .auth-result-block.js-form-forgot').replaceWith($(response).find('.auth-result-block.js-form-forgot'));
            if ($(response).find('.auth-result-block.js-form-forgot .auth-success').length) {
                $form[0].reset();
                $('.form.js-form-forgot').hide();
            }
        });
    });
});